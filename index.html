<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHESS ARENA X</title>
    <style>
        body { background: #161512; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        .status { color: #00ff00; margin-top: 10px; font-weight: bold; }
        .error { color: #ff4444; }
        button { background: #45a049; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>CHESS ARENA X</h1>
    <div id="app-status">Initialisation...</div>
    <div id="user-info"></div>
    <br>
    <button onclick="resetToken()">Changer le Token</button>

    <script>
        const statusEl = document.getElementById('app-status');
        const userEl = document.getElementById('user-info');

        // Récupération sécurisée : on ne met rien en dur pour éviter le ban GitHub
        let TOKEN = localStorage.getItem('LICHESS_TOKEN');

        async function startApp() {
            if (!TOKEN) {
                TOKEN = prompt("Jeton Lichess requis (il ne sera pas envoyé sur GitHub) :");
                if (TOKEN) {
                    localStorage.setItem('LICHESS_TOKEN', TOKEN);
                    location.reload();
                } else {
                    statusEl.innerHTML = "<span class='error'>Accès refusé : Token manquant.</span>";
                    return;
                }
            }

            try {
                const response = await fetch('https://lichess.org', {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + TOKEN,
                        'Accept': 'application/json'
                    }
                });

                if (response.status === 401) {
                    throw new Error("Token révoqué ou expiré (Vérifie tes notifications Lichess)");
                }

                const data = await response.json();
                statusEl.innerHTML = "Connecté avec succès !";
                userEl.innerHTML = `Utilisateur : <strong>${data.username}</strong>`;
                
                // --- ICI : Lance le reste de ton projet Chess Arena X ---
                console.log("Données reçues :", data);

            } catch (error) {
                statusEl.innerHTML = `<span class="error">Erreur : ${error.message}</span>`;
                // Si erreur d'auth, on vide le storage pour corriger au prochain refresh
                if (error.message.includes("401")) localStorage.removeItem('LICHESS_TOKEN');
            }
        }

        function resetToken() {
            localStorage.removeItem('LICHESS_TOKEN');
            location.reload();
        }

        // Lancement au chargement de la page
        window.onload = startApp;
    </script>
</body>
</html>
￼Enter
