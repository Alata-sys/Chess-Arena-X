<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chess Battle Run - Checkmate Challenge</title>
<style>
    body {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #fff7e6, #ffe066); /* Couleurs lumineuses */
        margin: 0;
        padding: 0;
    }
    header {
        background: linear-gradient(90deg, #ffd633, #ffb347); /* Jaune lumineux */
        color: #1a1a1a;
        padding: 25px;
        text-align: center;
        font-size: 2em;
        font-weight: bold;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    main {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
    }
    .game-card {
        width: 95%;
        max-width: 550px;
        background-color: #ffffff;
        border: 3px solid #ffdd57;
        border-radius: 15px;
        margin: 20px 0;
        padding: 20px;
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        text-align: center;
        transition: transform 0.3s;
    }
    .game-card:hover {
        transform: scale(1.03);
    }
    .game-card h2 {
        margin-top: 0;
        color: #ff6f00;
    }
    .players, .spectators {
        font-size: 1em;
        margin: 10px 0;
        color: #333333;
    }
    button {
        background-color: #ffcc33;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 15px;
        transition: background 0.3s;
    }
    button:hover {
        background-color: #ffb700;
    }
    /* ðŸ”¹ Lichess board container */
    #lichessBoard {
        width: 90%;
        max-width: 600px;
        height: 400px;
        margin-top: 30px;
        border: 3px solid #ffdd57;
        border-radius: 15px;
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
</style>
</head>
<body>

<header>Chess Battle Run</header>

<main>
    <div class="game-card" id="checkmateCard">
        <h2>ðŸ”¥ Checkmate Challenge</h2>
        <div class="players" id="playersList">Joueurs : ...</div>
        <div class="spectators" id="spectatorsList">Spectateurs : ...</div>
        <button onclick="joinGame()">Jouer</button>
    </div>

    <!-- ðŸ”¹ Lichess live board -->
    <div id="lichessBoard">
        <iframe src="https://lichess.org/study/embed/demoGame1?theme=auto" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
    </div>
</main>

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>

<script>
    // ðŸ”¹ Config Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyD3OUbb_upJjNfAIC-bSI4ix46Q79iZHyQ",
      authDomain: "c-b-r-4e772.firebaseapp.com",
      databaseURL: "https://c-b-r-4e772-default-rtdb.firebaseio.com",
      projectId: "c-b-r-4e772",
      storageBucket: "c-b-r-4e772.firebasestorage.app",
      messagingSenderId: "213615144690",
      appId: "1:213615144690:web:a0b06fa6b473527942ea6b",
      measurementId: "G-GQ0VC2PYG0"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const analytics = firebase.analytics();
    const db = firebase.database();

    const gameId = "demoGame1"; // ID de la partie demo

    // ðŸ”¹ CrÃ©er une partie test
    function createDemoGame() {
        db.ref("checkmateChallenge/games/" + gameId).set({
            players: { white: "Alice", black: "Bob" },
            puzzle: { fen: "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1", solution: ["e2e4","d7d5"] },
            status: "playing",
            spectators: ["Charlie", "Dana"]
        });
    }

    // ðŸ”¹ Afficher la partie dans la carte
    function displayGame() {
        db.ref("checkmateChallenge/games/" + gameId).once("value", snapshot => {
            const data = snapshot.val();
            if(data){
                document.getElementById("playersList").innerText = "Joueurs : " + data.players.white + " (âšª) vs " + data.players.black + " (âš«)";
                document.getElementById("spectatorsList").innerText = "Spectateurs : " + data.spectators.join(", ");
            }
        });
    }

    // ðŸ”¹ Bouton rejoindre partie
    function joinGame() {
        alert("Vous avez rejoint la partie ! (dÃ©mo)");
        // Ici tu pourras ajouter la logique pour lier le joueur rÃ©el Ã  Firebase
    }

    // ðŸ”¹ Initialisation
    createDemoGame();
    displayGame();
</script>

</body>
</html>
