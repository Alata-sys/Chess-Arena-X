<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chess Battle Run - Checkmate Challenge</title>
<style>
    body {
        font-family: sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
    }
    header {
        background-color: #dbac16;
        color: black;
        padding: 20px;
        text-align: center;
        font-size: 1.5em;
        font-weight: bold;
    }
    main {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
    }
    .game-card {
        width: 90%;
        max-width: 500px;
        background-color: white;
        border: 2px solid #dbac16;
        border-radius: 10px;
        margin: 15px 0;
        padding: 15px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        text-align: center;
    }
    .game-card h2 {
        margin-top: 0;
    }
    .players, .spectators {
        font-size: 0.9em;
        margin: 5px 0;
    }
    button {
        background-color: #dbac16;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 10px;
    }
</style>
</head>
<body>

<header>Chess Battle Run</header>

<main>
    <div class="game-card" id="checkmateCard">
        <h2>ðŸ”¥ Checkmate Challenge</h2>
        <div class="players" id="playersList">Joueurs : ...</div>
        <div class="spectators" id="spectatorsList">Spectateurs : ...</div>
        <button onclick="joinGame()">Jouer</button>
    </div>
</main>

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>

<script>
    // ðŸ”¹ Config Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyD3OUbb_upJjNfAIC-bSI4ix46Q79iZHyQ",
      authDomain: "c-b-r-4e772.firebaseapp.com",
      databaseURL: "https://c-b-r-4e772-default-rtdb.firebaseio.com",
      projectId: "c-b-r-4e772",
      storageBucket: "c-b-r-4e772.firebasestorage.app",
      messagingSenderId: "213615144690",
      appId: "1:213615144690:web:a0b06fa6b473527942ea6b",
      measurementId: "G-GQ0VC2PYG0"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const analytics = firebase.analytics();
    const db = firebase.database();

    const gameId = "demoGame1"; // ID de la partie demo

    // ðŸ”¹ CrÃ©er une partie test
    function createDemoGame() {
        db.ref("checkmateChallenge/games/" + gameId).set({
            players: { white: "Alice", black: "Bob" },
            puzzle: { fen: "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1", solution: ["e2e4","d7d5"] },
            status: "playing",
            spectators: ["Charlie", "Dana"]
        });
    }

    // ðŸ”¹ Afficher la partie dans la carte
    function displayGame() {
        db.ref("checkmateChallenge/games/" + gameId).once("value", snapshot => {
            const data = snapshot.val();
            if(data){
                document.getElementById("playersList").innerText = "Joueurs : " + data.players.white + " (âšª) vs " + data.players.black + " (âš«)";
                document.getElementById("spectatorsList").innerText = "Spectateurs : " + data.spectators.join(", ");
            }
        });
    }

    // ðŸ”¹ Bouton rejoindre partie
    function joinGame() {
        alert("Vous avez rejoint la partie ! (dÃ©mo)");
        // Ici tu pourras ajouter la logique pour lier le joueur rÃ©el Ã  Firebase
    }

    // ðŸ”¹ Initialisation
    createDemoGame();
    displayGame();
</script>

</body>
</html>
